<!DOCTYPE html>
<html lang="en">
    <head>
        <title> GFM's Gaming Arena </title>
        <meta charset="utf-8" name="viewport" content="width=1280, height=720, initial-scale=1" />
        <meta name="keywords" content="stream,skin" />
        <meta name="description" content="GFM's streaming skin" />
        <meta name="author" content="Gabriel Francisco Mandaji" />

        <style>
            html, body {
                width: 1280px;
                height: 720px;
                margin: 0;
                padding: 0;
            }
            body {
                background-color: #000000;
                color: #000000;
            }
            .block {
                background-color: #c3c3c3;
            }
            .def_font {
                font-family: "sans-serif";
                font-size: 44px;
                font-weight: bold;
                text-shadow: 1.75px 1.75px 2px rgba(0, 0, 0, 0.33);
            }
            .small_font {
                font-size: 28px;
            }
        </style>

<!--
        <script type="text/javascript" src="/script/box.js"></script>
        <script type="text/javascript" src="/script/conn.js"></script>
        <script type="text/javascript" src="/script/gamepad.js"></script>
        <script type="text/javascript" src="/script/keyboardListener.js"></script>
        <script type="text/javascript" src="/script/utils.js"></script>
        <script type="text/javascript" src="/script/text.js"></script>
        <script type="text/javascript" src="/script/display.js"></script>
-->
        <!-- Required because of 'updateCurrentDiff' -->
        <script type="text/javascript" src="/script/splits.js"></script>

        <script type="text/javascript" src="/script/timer.js"></script>
        <script type="text/javascript" src="/script/simple-gamepad.js"></script>

        <script>
            let updateVisibleTimer = function() {
                let hiddenTimer = document.getElementById("hd-timer");
                let timerView = document.getElementById("timer-view");
                let msView = document.getElementById("ms-timer");

                let txt = hiddenTimer.innerHTML.trim();
                let msIdx = txt.indexOf('.') + 1;
                let upper = txt.substring(0, msIdx);

                /* Remove hours */
                if (upper[0] == '0')
                    upper = upper.substring(1);
                if (upper[0] == '0')
                    upper = upper.substring(2);
                /* Remove minutes */
                if (upper[0] == '0')
                    upper = upper.substring(1);
                if (upper[0] == '0')
                    upper = upper.substring(2);
                timerView.innerText = upper;

                let ms = txt.substring(msIdx);
                msView.innerText = ms.substring(0, 2);
            }

            let bootstrap = function() {
                let hiddenTimer = document.getElementById("hd-timer");
                setupTimer(hiddenTimer);

                gamepad.setup();
                // catherine uses SELECT
                gamepad.setTimerEventButton('select');

                // YKM uses R2 (GCN z)
                //gamepad.setTimerEventButton('r2');

                window.setInterval(updateVisibleTimer, 1000 / 30);
            }

            document.addEventListener("DOMContentLoaded", function (event) {
                window.setTimeout(bootstrap, 100)
            })
        </script>
    </head>
    <body>
        <!-- Use a hidden timer to actually update the timer by script -->
        <label id='hd-timer' style="visibility: hidden"> 00:00:00.000 </label>

        <div id='game-border' style='position: fixed; right: 0; top: 0; width: 1124px; height: 634px; background-color: #c3c3c3;'>
            <div id='game-view' style='position: fixed; right: 0; top: 0; width: 1122px; height: 632px; background-color: #000000;'>
            </div>
        </div>

        <div id='timer-block' class='block' style='position: fixed; width: 300px; bottom: 0;'>
            <div style="display: flex; justify-content: flex-end">
            <label id='timer-view' class="def_font"> 00:00:00. </label>
            <label id='ms-timer' class="def_font small_font" style="margin-top: 16px; margin-right: 0.5em"> 00 </label>
            </div>
        </div>
    </body>
</html>
